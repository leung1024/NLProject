

# 实现目标
1. 核心：格式化, 量化
1. 新闻信息量化
	- 提取新闻特征信息，并存入数据库中
	- 利用特征信息，计算某类新闻与某些期货产品的相关度
	- 计算新闻提供者对期货或者股票价格的影响力
	- 股票的新闻热度
	- 用户能够通调用接口，获取数据库的信息或者新闻的特征信息
1. 输入某个股票或者期货，能得到新闻热度、相关程度等信息

# 阶段目标
1. 完成关键新闻的提取
    - 完成数据接口的设计
    - 实现对数据库种的新闻语料进行预处理
    - 完成特征提取模块，并将相关的信息打印在命令行种
    - 完成数据库设计，并将特征数据存入数据库中
    - 利用DAG图定义新闻处理逻辑
1. 句意分析
1. 新闻热度分析
1. 分析期货与新闻类别的相关性

# 系统架构图
![](http://ww1.sinaimg.cn/large/681b503dgy1fqymtbqkg6j20pf0hxgmk.jpg)

# 技术选型
- 数据存储 -- > MongoDB
    - 因为新闻特征信息的个数随时有可能改变，数据表的结构有变动的可能性，所以这里选用MongoDB作为数据库存储
- RPC框架 -- > Thrift
    - 功能比较完善
    - 企业背书：美团、饿了么
    - 可以实现多种编程语言的调用，而且通信是基于RPC进行的。
    - 序列化和反序列化效率比较高（待测试）

# 数据库设计
- 新闻特征数据库

    | 字段			 | 类型   | 描述                     | 备注 |
    | ------------- | ------ | ------------------ | ----- |
    | _id			| int     | 新闻的唯一标示符 |         |
    | title			| str     | 新闻标题               |         |
    | post_date		| str     | 新闻发布日期        			|         |
    | seg_news       |list     |新闻内容经过处理后的结果||
	| key_sentencens | list | 新闻中需要关注的句子 | |
	| relate_future_id	 	 | list | 与本条新闻相关的期货代码 | |
	|news_type|str|新闻类型|比如：公告，手续费提升等||

# 模块设计
1. 数据获取模块
    -  输入：查询日期，股票代码，股票名称
    -  输出：符合查询条件的新闻
2. 文字预处理模块
    -  输入：新闻内容
    -  输出：预处理和分词的结果
    -  备注：
        -  需要额外维护一个自定义字典（股票名称，股票代码等）
3. 文本信息提取模块
    - 输入：分词信息
    - 输出：
        - 关键词频统计,将新闻归类
        - 保存某期货商品或股票在近期某些费用的净浮动值
    - 备注：
        - 关注点：交易手续费的改变，交割手续费的改变，交易限额，交割仓库的库容
4. 外部接口模块
	- 股票相关度计算模块
	- 股票热度计算模块

# 类设计
- Text Class
![](http://ww1.sinaimg.cn/large/681b503dgy1fr6pjsa5kcj20u10iuaar.jpg)


# ToDoList

### 20180513
- - [ ] 适配中国金融商品交易所，大连商品交易所
- - [ ] 优化DAG模式的新闻处理流程
- - [ ] 完善文档资料

### 20180504

- - [x] Text类分解 -> 多个不同新闻源的处理方法 （插件的形式）
- - [ ] 处理多个交易所的新闻来源（上海期货交易所，中国金融商品交易所，大连商品交易所），可以按这个来分解Text类
- - [x] 加入流处理模式，利用字典定义整个处理流程
- - [x] 加入数据库写入接口模块
- - [x] 建立数据库，与原始数据隔离
- - [x] 期货代码只需保存字母和数字的形式

### 20180427

- - [x] 以费用类型（手续费、交易限额）作为类型，对新闻进行分类
- - [x] 根据某个期货代码，获取近期相关的（费用变动）新闻
- - [ ] 找出所有的期货代码和期货货物名称，制作字典方便分词
- - [x] 统一数据获取接口
- - [x]  分词和向量化模块解耦

